# MARFOR v3.0.0 - Random Forest Hierarchy —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Å–µ–∑–æ–Ω–Ω–æ—Å—Ç—å—é

**–î–∞—Ç–∞ —Ä–µ–ª–∏–∑–∞:** 18 –æ–∫—Ç—è–±—Ä—è 2025

## üéâ –û—Å–Ω–æ–≤–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

### ‚≠ê Random Forest Hierarchy - –ø—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è –º–æ–¥–µ–ª—å –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è

–î–æ–±–∞–≤–ª–µ–Ω–∞ –Ω–æ–≤–∞—è –º–æ–¥–µ–ª—å –º–∞—à–∏–Ω–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è —Å –∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏–º —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ–º –∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–º–∏ –ø—Ä–∏–∑–Ω–∞–∫–∞–º–∏.

**–ù–æ–≤—ã–µ –º–æ–¥—É–ª–∏:**
- `feature_builder.py` - –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã—Ö –ø—Ä–∏–∑–Ω–∞–∫–æ–≤ –¥–ª—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ä—è–¥–æ–≤
- `hierarchy.py` - –∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–æ–µ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–≥–Ω–æ–∑–æ–≤ (bottom-up, top-down)

**–ü—Ä–∏–∑–Ω–∞–∫–∏ (42+ –≤–º–µ—Å—Ç–æ 5):**

1. **–õ–∞–≥–æ–≤—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏ (8):**
   - lag_1, lag_2, lag_3, lag_4, lag_6, lag_12
   - yoy_ratio, yoy_diff (–æ—Ç–Ω–æ—à–µ–Ω–∏–µ –∏ —Ä–∞–∑–Ω–∏—Ü–∞ –∫ –ø—Ä–æ—à–ª–æ–º—É –≥–æ–¥—É)

2. **Rolling –ø—Ä–∏–∑–Ω–∞–∫–∏ (16):**
   - rolling_mean_3, rolling_mean_6
   - rolling_std_3, rolling_std_6
   - rolling_min_3, rolling_min_6
   - rolling_max_3, rolling_max_6

3. **–°–µ–∑–æ–Ω–Ω—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏ (18):**
   - month_sin, month_cos (—Å–∏–Ω—É—Å–æ–∏–¥—ã)
   - is_month_1...is_month_12 (one-hot –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –º–µ—Å—è—Ü–∞)
   - is_peak_month (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∏–∑ –¥–∞–Ω–Ω—ã—Ö!)
   - is_q4 (Q4 –æ–±—ã—á–Ω–æ –ø–∏–∫–æ–≤—ã–π)

4. **–¢—Ä–µ–Ω–¥–æ–≤—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏ (2):**
   - time_index (–ª–∏–Ω–µ–π–Ω—ã–π —Ç—Ä–µ–Ω–¥)
   - time_index_squared (–∫–≤–∞–¥—Ä–∞—Ç–∏—á–Ω—ã–π —Ç—Ä–µ–Ω–¥)

### üéØ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–∏–∫–æ–≤—ã—Ö –º–µ—Å—è—Ü–µ–≤

–ú–æ–¥–µ–ª—å **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç** –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø–∏–∫–æ–≤—ã–µ –º–µ—Å—è—Ü—ã:
- –í—ã—á–∏—Å–ª—è–µ—Ç—Å—è —Å—Ä–µ–¥–Ω–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫–∏ –ø–æ –∫–∞–∂–¥–æ–º—É –º–µ—Å—è—Ü—É
- –ú–µ—Å—è—Ü—ã —Å–æ –∑–Ω–∞—á–µ–Ω–∏–µ–º > 120% –æ—Ç –æ–±—â–µ–≥–æ —Å—Ä–µ–¥–Ω–µ–≥–æ —Å—á–∏—Ç–∞—é—Ç—Å—è –ø–∏–∫–æ–≤—ã–º–∏
- –ü–∏–∫–æ–≤—ã–µ –º–µ—Å—è—Ü—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ø—Ä–∏ –ø—Ä–æ–≥–Ω–æ–∑–µ

**–ü—Ä–∏–º–µ—Ä:** –î–ª—è —Ü–≤–µ—Ç–æ—á–Ω–æ–≥–æ –±–∏–∑–Ω–µ—Å–∞ –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è: —Ñ–µ–≤—Ä–∞–ª—å (14 —Ñ–µ–≤), –º–∞—Ä—Ç (8 –º–∞—Ä—Ç–∞), –Ω–æ—è–±—Ä—å (–ø—Ä–µ–¥–Ω–æ–≤–æ–≥–æ–¥–Ω–∏–π —Å–µ–∑–æ–Ω)

### üìä –£–ª—É—á—à–µ–Ω–Ω–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å –ø—Ä–æ–≥–Ω–æ–∑–∞

**–ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ª–∞–≥–æ–≤ –ø—Ä–∏ –ø—Ä–æ–≥–Ω–æ–∑–µ:**
- –†–∞–Ω—å—à–µ: –ª–∞–≥–∏ –±—Ä–∞–ª–∏—Å—å –∫–∞–∫ —Å—Ä–µ–¥–Ω–µ–µ ‚Üí —Å–µ–∑–æ–Ω–Ω–æ—Å—Ç—å —Ç–µ—Ä—è–ª–∞—Å—å
- –¢–µ–ø–µ—Ä—å: –ª–∞–≥–∏ –±–µ—Ä—É—Ç—Å—è –∫–∞–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è ‚Üí —Å–µ–∑–æ–Ω–Ω–æ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è
- `lag_12` –¥–ª—è –Ω–æ—è–±—Ä—è 2026 = –Ω–æ—è–±—Ä—å 2025 (–ø–∏–∫–æ–≤—ã–π!)

### üé® UX —É–ª—É—á—à–µ–Ω–∏—è

**–ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø—Ä–æ–≥–Ω–æ–∑–∞:**
- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –∞–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–æ–º
- –°—Ç–∞–¥–∏–∏: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ (30%) ‚Üí –ì–µ–Ω–µ—Ä–∞—Ü–∏—è (50%) ‚Üí –ó–∞–≥—Ä—É–∑–∫–∞ (80%) ‚Üí –ì–æ—Ç–æ–≤–æ (100%)
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç, —á—Ç–æ –ø—Ä–æ—Ü–µ—Å—Å –∏–¥–µ—Ç, –∞ –Ω–µ "–∑–∞–≤–∏—Å–ª–æ"

**–í—ã–±–æ—Ä –º–µ–∂–¥—É –¥–≤—É–º—è –º–æ–¥–µ–ª—è–º–∏:**
- Random Forest (–±–∞–∑–æ–≤–∞—è) - –±—ã—Å—Ç—Ä–∞—è, –ø—Ä–æ—Å—Ç–∞—è
- Random Forest Hierarchy - —Ç–æ—á–Ω–∞—è, —É—á–∏—Ç—ã–≤–∞–µ—Ç —Å–µ–∑–æ–Ω–Ω–æ—Å—Ç—å

**–ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π BI-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –æ–±—É—á–µ–Ω–∏—è:**
- –†–µ–∂–∏–º—ã: –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä—è–¥—ã / –°—Ä–µ–∑—ã
- –†–∞–∑–±–∏–≤–∫–∞ –ø–æ —Å—Ç–æ–ª–±—Ü–∞–º
- –§–∏–ª—å—Ç—Ä—ã
- –î–µ—Ç–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞: –§–∞–∫—Ç vs –ü—Ä–æ–≥–Ω–æ–∑ –ø–æ –∫–∞–∂–¥–æ–º—É —Å—Ä–µ–∑—É

### üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

**–û–±—É—á–µ–Ω–∏–µ –∏ –ø—Ä–æ–≥–Ω–æ–∑ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω—ã:**
- –û–±—É—á–µ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –ø–∞–º—è—Ç–∏
- –ü—Ä–∏ –ø—Ä–æ–≥–Ω–æ–∑–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–∞ –∂–µ –º–æ–¥–µ–ª—å (–Ω–µ –ø–µ—Ä–µ–æ–±—É—á–∞–µ—Ç—Å—è)
- –ú–µ—Ç—Ä–∏–∫–∏ –Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ = –∫–∞—á–µ—Å—Ç–≤–æ —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ–≥–Ω–æ–∑–∞

**–°—Ä–µ–∑—ã –∫–∞–∫ –ø—Ä–∏–∑–Ω–∞–∫–∏ (–Ω–µ –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –º–æ–¥–µ–ª–∏):**
- –†–∞–Ω—å—à–µ: 1503 –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ √ó 3 –º–æ–¥–µ–ª–∏ = 4509 –æ–±—É—á–µ–Ω–∏–π (—á–∞—Å—ã)
- –¢–µ–ø–µ—Ä—å: 2 –º–æ–¥–µ–ª–∏ –Ω–∞ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö (—Å–µ–∫—É–Ω–¥—ã)
- –í—ã—à–µ —Ç–æ—á–Ω–æ—Å—Ç—å, –º–µ–Ω—å—à–µ –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏–µ

### üìà –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

**–°–µ–∑–æ–Ω–Ω—ã–µ –ø–∏–∫–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä—É—é—Ç—Å—è:**
- –ù–æ—è–±—Ä—å –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Å–ø–ª–µ—Å–∫ (–∫–∞–∫ –≤ –∏—Å—Ç–æ—Ä–∏–∏)
- –ú–∞—Ä—Ç –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –ø–∏–∫
- –õ–µ—Ç–Ω–∏–µ –º–µ—Å—è—Ü—ã –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å

## üêõ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏

- ‚úÖ –°–≤–æ–¥–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ "–ê–Ω–∞–ª–∏–∑"
- ‚úÖ –†–µ–∂–∏–º "–°—Ä–µ–∑—ã" —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ (–º–µ—Ç—Ä–∏–∫–∏ –æ—Å—Ç–∞—é—Ç—Å—è –º–µ—Ç—Ä–∏–∫–∞–º–∏)
- ‚úÖ –†–∞–∑–±–∏–≤–∫–∞ –ø–æ —Å—Ç–æ–ª–±—Ü–∞–º —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ä—è–¥–æ–≤
- ‚úÖ Halfyear, Quarter, month –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∑–∞–ø–æ–ª–Ω—è—é—Ç—Å—è
- ‚úÖ –û–±–µ –º–µ—Ç—Ä–∏–∫–∏ (–§–∞–∫—Ç, –ü—Ä–æ–≥–Ω–æ–∑) –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –Ω–∞ –≥—Ä–∞—Ñ–∏–∫–µ
- ‚úÖ JSON serialization (inf/nan ‚Üí 0)
- ‚úÖ –û–±—É—á–µ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∏ –ø—Ä–æ–≥–Ω–æ–∑–µ

## üì¶ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

–ë–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π. –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è:
- pandas, numpy
- scikit-learn (RandomForestRegressor, LabelEncoder)
- Flask
- Chart.js (—Ñ—Ä–æ–Ω—Ç–µ–Ω–¥)

## üöÄ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

1. **–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö** ‚Üí –ú–∞–ø–ø–∏–Ω–≥ ‚Üí **–ê–Ω–∞–ª–∏–∑**
2. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–≥–Ω–æ–∑–∞** (–≥–æ—Ä–∏–∑–æ–Ω—Ç)
3. **–û–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π**:
   - –í—ã–±–µ—Ä–∏—Ç–µ Random Forest –∏/–∏–ª–∏ Random Forest Hierarchy
   - –û–±—É—á–µ–Ω–∏–µ –∑–∞–π–º–µ—Ç 5-15 —Å–µ–∫—É–Ω–¥
   - –°—Ä–∞–≤–Ω–∏—Ç–µ MAPE –æ–±–µ–∏—Ö –º–æ–¥–µ–ª–µ–π
4. **–í—ã–±–æ—Ä –ª—É—á—à–µ–π –º–æ–¥–µ–ª–∏** –≤ dropdown
5. **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–æ–≥–Ω–æ–∑–∞** —Å –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–æ–º
6. **–ê–Ω–∞–ª–∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤** —Å –ø–æ–ª–Ω—ã–º BI-—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–æ–º

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

- –î–ª—è –±–∏–∑–Ω–µ—Å–∞ —Å —Å–µ–∑–æ–Ω–Ω–æ—Å—Ç—å—é –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ **Random Forest Hierarchy**
- –î–ª—è –±—ã—Å—Ç—Ä—ã—Ö –ø—Ä–æ–≥–Ω–æ–∑–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ **Random Forest** (–±–∞–∑–æ–≤—É—é)
- –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ –ø–∏–∫–æ–≤—ã–µ –º–µ—Å—è—Ü—ã –≤ –ª–æ–≥–∞—Ö –æ–±—É—á–µ–Ω–∏—è
- –°—Ä–∞–≤–Ω–∏–≤–∞–π—Ç–µ –ø—Ä–æ–≥–Ω–æ–∑ —Å –∏—Å—Ç–æ—Ä–∏–µ–π –≤ —Ä–µ–∂–∏–º–µ "–í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä—è–¥—ã"

---

**–í–µ—Ä—Å–∏—è:** 3.0.0  
**–ê–≤—Ç–æ—Ä:** MARFOR Team  
**–õ–∏—Ü–µ–Ω–∑–∏—è:** Proprietary

