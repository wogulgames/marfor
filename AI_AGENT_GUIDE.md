# AI Agent Guide - MARFOR Project

**–î–ª—è –±—É–¥—É—â–∏—Ö AI-–∞–≥–µ–Ω—Ç–æ–≤, —Ä–∞–±–æ—Ç–∞—é—â–∏—Ö —Å —ç—Ç–∏–º –ø—Ä–æ–µ–∫—Ç–æ–º**

---

## üìã –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

**MARFOR** - —ç—Ç–æ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤–æ–≥–æ –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –º–∞—à–∏–Ω–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è.

### –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫:
- **Backend:** Python 3.13, Flask
- **ML:** scikit-learn (Random Forest), Prophet (Facebook), statsmodels (ARIMA)
- **Frontend:** Vanilla JavaScript, Bootstrap 5, Chart.js
- **Data:** pandas, numpy

### –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:

1. **–ó–∞–≥—Ä—É–∑–∫–∞ –∏ –º–∞–ø–ø–∏–Ω–≥ –¥–∞–Ω–Ω—ã—Ö** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–≥—Ä—É–∂–∞–µ—Ç CSV —Å –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
2. **–ê–Ω–∞–ª–∏–∑ (BI)** - –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ —Å–≤–æ–¥–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã, –≥—Ä–∞—Ñ–∏–∫–∏, —Ñ–∏–ª—å—Ç—Ä—ã
3. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–≥–Ω–æ–∑–∞** - –≤—ã–±–æ—Ä –º–µ—Ç—Ä–∏–∫–∏, –≥–æ—Ä–∏–∑–æ–Ω—Ç –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è
4. **–û–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π** - Random Forest, Random Forest Hierarchy
5. **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–æ–≥–Ω–æ–∑–∞** - —Å —É—á–µ—Ç–æ–º —Å–µ–∑–æ–Ω–Ω–æ—Å—Ç–∏, —Å—Ä–µ–∑–æ–≤, –∏–µ—Ä–∞—Ä—Ö–∏–∏
6. **–†–µ–∑—É–ª—å—Ç–∞—Ç—ã** - BI-–∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø—Ä–æ–≥–Ω–æ–∑–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

---

## üéØ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### Backend (`working_web_app.py`)

**–û—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å:** `ForecastApp` (–≥–ª–æ–±–∞–ª—å–Ω—ã–π –æ–±—ä–µ–∫—Ç `forecast_app`)

**–ö–ª—é—á–µ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ –ø–∞–º—è—Ç–∏:**
- `forecast_app.df` - –∏—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ—Å–ª–µ –º–∞–ø–ø–∏–Ω–≥–∞
- `forecast_app.mapping_config` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –º–∞–ø–ø–∏–Ω–≥–∞
- `forecast_app.forecast_settings[session_id]` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–≥–Ω–æ–∑–∞ (–º–µ—Ç—Ä–∏–∫–∞, –≥–æ—Ä–∏–∑–æ–Ω—Ç)
- `forecast_app.training_results[session_id]` - —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ–±—É—á–µ–Ω–∏—è –º–æ–¥–µ–ª–µ–π (–≤–∫–ª—é—á–∞—è –º–æ–¥–µ–ª–∏!)
- `forecast_app.forecast_results[session_id]` - —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–æ–≥–Ω–æ–∑–∞ (—Ñ–∞–∫—Ç + –ø—Ä–æ–≥–Ω–æ–∑)

**–í–∞–∂–Ω–æ:** –ú–æ–¥–µ–ª–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ `training_results` –∏ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ø—Ä–∏ –ø—Ä–æ–≥–Ω–æ–∑–µ!

### Frontend

**–ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ JavaScript:**
- `pivot_table_system.js` - —Å–≤–æ–¥–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã, –≥—Ä–∞—Ñ–∏–∫–∏
- `breadcrumbs.js` - –Ω–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ —à–∞–≥–∞–º
- `pivot_filters.js`, `pivot_controls.js`, `pivot_loader.js` - –º–æ–¥—É–ª–∏ BI

**–•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö:**
- `sessionStorage.dataMapping` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –º–∞–ø–ø–∏–Ω–≥–∞
- `window.rawPivotData` - –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Å–≤–æ–¥–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã
- `window.processedData` - –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

### –°–≤–æ–¥–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ (Pivot Table)

**–≠—Ç–æ —Å–∞–º–∞—è —Å–ª–æ–∂–Ω–∞—è —á–∞—Å—Ç—å –ø—Ä–æ–µ–∫—Ç–∞!**

**–ö–ª–∞—Å—Å—ã:**
- `PivotConfig` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (rows, columns, values, mode)
- `PivotData` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö, –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞
- `PivotRenderer` - —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ HTML

**–†–µ–∂–∏–º—ã:**
- `time-series` - –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä—è–¥—ã –≤ —Å—Ç—Ä–æ–∫–∞—Ö, –º–µ—Ç—Ä–∏–∫–∏ –∫–∞–∫ –∑–Ω–∞—á–µ–Ω–∏—è
- `slices` - —Å—Ä–µ–∑—ã –≤ —Å—Ç—Ä–æ–∫–∞—Ö, –º–µ—Ç—Ä–∏–∫–∏ –∫–∞–∫ –∑–Ω–∞—á–µ–Ω–∏—è
- `split-columns` - —Ä–∞–∑–±–∏–≤–∫–∞ –ø–æ —Å—Ç–æ–ª–±—Ü–∞–º (–∫–∞–∫ –≤ Google Sheets)

**–ü–µ—Ä–µ—Ö–æ–¥ –≤ split-columns:**
```javascript
if (splitBySlice && splitBySlice !== '') {
    renderMode = 'split-columns';
    originalMode = 'time-series'; // –∏–ª–∏ 'slices'
}
```

---

## ‚ö†Ô∏è –¢–∏–ø–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏ –∏ –∏—Ö —Ä–µ—à–µ–Ω–∏—è

### 1. **–û—à–∏–±–∫–∞: –°–≤–æ–¥–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ —Ä–µ–∂–∏–º–µ split-columns**

**–ü—Ä–æ–±–ª–µ–º–∞:** `columns: []` –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏, —Ö–æ—Ç—è –≤—ã–±—Ä–∞–Ω–∞ —Ä–∞–∑–±–∏–≤–∫–∞.

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è `originalMode` –∏–ª–∏ `mode !== 'split-columns'`.

**–†–µ—à–µ–Ω–∏–µ:**
```javascript
let renderMode = currentPivotMode;
let originalMode = currentPivotMode;

if (splitBySlice && splitBySlice !== '') {
    renderMode = 'split-columns';
    // originalMode –æ—Å—Ç–∞–µ—Ç—Å—è –ø—Ä–µ–∂–Ω–∏–º!
}

renderNewPivotTable(data, mapping, renderMode, splitBySlice, originalMode);
```

### 2. **–û—à–∏–±–∫–∞: –ê–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –Ω—É–ª–∏ –≤ split-columns**

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–∏ —Å–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏–∏ —Å—Ç—Ä–æ–∫ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "2024") –∑–Ω–∞—á–µ–Ω–∏—è = 0.

**–ü—Ä–∏—á–∏–Ω–∞:** –õ–æ–≥–∏–∫–∞ —Å—É–º–º–∏—Ä–æ–≤–∞–Ω–∏—è –∏—Å–∫–∞–ª–∞ —Ç–æ–ª—å–∫–æ –ø—Ä—è–º—ã—Ö –¥–µ—Ç–µ–π, –∞ –Ω–µ –≤—Å–µ—Ö –ø–æ—Ç–æ–º–∫–æ–≤.

**–†–µ—à–µ–Ω–∏–µ:** –í `PivotRenderer.createRowsHTML()` —É–¥–∞–ª–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É `childKeyParts.length === parentKeyParts.length + 1`, —á—Ç–æ–±—ã —Å—É–º–º–∏—Ä–æ–≤–∞–ª–∏—Å—å **–≤—Å–µ** –ø–æ—Ç–æ–º–∫–∏.

### 3. **–û—à–∏–±–∫–∞: –ü—Ä–æ–≥–Ω–æ–∑ –Ω–µ —É—á–∏—Ç—ã–≤–∞–µ—Ç —Å—Ä–µ–∑—ã (region_to, category, subdivision = NaN)**

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–æ–≥–Ω–æ–∑ –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–ª—Å—è —Ç–æ–ª—å–∫–æ –ø–æ `year + month`, –±–µ–∑ —Å—Ä–µ–∑–æ–≤.

**–ü—Ä–∏—á–∏–Ω–∞:** –í `generate_forecast()` –∞–≥—Ä–µ–≥–∞—Ü–∏—è –±—ã–ª–∞ `groupby([year_col, month_col])` –±–µ–∑ —Å—Ä–µ–∑–æ–≤.

**–†–µ—à–µ–Ω–∏–µ:**
```python
groupby_cols = [year_col, month_col] + slice_cols
df_agg = df.groupby(groupby_cols)[metric].sum().reset_index()
```

### 4. **–û—à–∏–±–∫–∞: –ú–æ–¥–µ–ª—å –æ–±—É—á–∞–µ—Ç—Å—è —á–∞—Å–∞–º–∏ (1503+ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏)**

**–ü—Ä–æ–±–ª–µ–º–∞:** –û–±—É—á–∞–ª–∞—Å—å –æ—Ç–¥–µ–ª—å–Ω–∞—è –º–æ–¥–µ–ª—å –¥–ª—è –∫–∞–∂–¥–æ–π –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ —Å—Ä–µ–∑–æ–≤.

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ - —Å—Ä–µ–∑—ã —ç—Ç–æ **–ø—Ä–∏–∑–Ω–∞–∫–∏**, –∞ –Ω–µ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä—è–¥—ã.

**–†–µ—à–µ–Ω–∏–µ:**
- Random Forest: —Å—Ä–µ–∑—ã ‚Üí LabelEncoder ‚Üí –ø—Ä–∏–∑–Ω–∞–∫–∏
- Prophet: —Å—Ä–µ–∑—ã ‚Üí One-hot encoding ‚Üí —Ä–µ–≥—Ä–µ—Å—Å–æ—Ä—ã
- –û–¥–Ω–∞ –º–æ–¥–µ–ª—å –Ω–∞ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö!

### 5. **–û—à–∏–±–∫–∞: –ú–µ—Ç—Ä–∏–∫–∏ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –Ω–∞ –≥—Ä–∞—Ñ–∏–∫–µ/—Ç–∞–±–ª–∏—Ü–µ**

**–ü—Ä–æ–±–ª–µ–º–∞:** –í –º–∞–ø–ø–∏–Ω–≥–µ `selectedMetrics` –ø—É—Å—Ç–æ–π –∏–ª–∏ –º–µ—Ç—Ä–∏–∫–∏ –Ω–µ –≤–∫–ª—é—á–µ–Ω—ã.

**–ü—Ä–∏—á–∏–Ω–∞:** `createPivotConfigFromMapping` —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç –º–µ—Ç—Ä–∏–∫–∏ –ø–æ `include` –∏–ª–∏ `selectedMetrics`.

**–†–µ—à–µ–Ω–∏–µ:**
```javascript
const modifiedMapping = JSON.parse(JSON.stringify(mapping));
modifiedMapping.selectedMetrics = ['metric1', 'metric2'];
// –ò–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å col.include = true –¥–ª—è –Ω—É–∂–Ω—ã—Ö –º–µ—Ç—Ä–∏–∫
```

### 6. **–û—à–∏–±–∫–∞: JSON serialization (Prophet/RandomForest is not JSON serializable)**

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—ã—Ç–∞–µ–º—Å—è –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –æ–±—ä–µ–∫—Ç –º–æ–¥–µ–ª–∏ –≤ JSON.

**–†–µ—à–µ–Ω–∏–µ:**
```python
# –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø–æ–ª–Ω—É—é –º–æ–¥–µ–ª—å –≤ –ø–∞–º—è—Ç–∏
forecast_app.training_results[session_id] = results

# –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∫–ª–∏–µ–Ω—Ç—É —Ç–æ–ª—å–∫–æ –º–µ—Ç—Ä–∏–∫–∏ –∏ validation_data
results_for_client = {}
for model_name, model_data in results.items():
    results_for_client[model_name] = {
        'metrics': model_data['metrics'],
        'validation_data': model_data['validation_data']
        # –ë–ï–ó 'model', 'label_encoders' –∏ —Ç.–¥.
    }
return jsonify({'success': True, 'results': results_for_client})
```

### 7. **–û—à–∏–±–∫–∞: inf/nan –≤ –º–µ—Ç—Ä–∏–∫–∞—Ö**

**–ü—Ä–æ–±–ª–µ–º–∞:** MAPE = inf –ø—Ä–∏ –¥–µ–ª–µ–Ω–∏–∏ –Ω–∞ –Ω–æ–ª—å, MAPE = nan –ø—Ä–∏ –ø—É—Å—Ç—ã—Ö –¥–∞–Ω–Ω—ã—Ö.

**–†–µ—à–µ–Ω–∏–µ:**
```python
def calculate_metrics(actual, predicted):
    # –ò—Å–∫–ª—é—á–∞–µ–º –Ω—É–ª–∏ –∏–∑ MAPE
    mask = actual != 0
    if mask.sum() > 0:
        mape = np.mean(np.abs((actual[mask] - predicted[mask]) / actual[mask])) * 100
    else:
        mape = 0.0
    
    # –ó–∞–º–µ–Ω—è–µ–º inf/nan –Ω–∞ 0
    mape = 0.0 if (np.isnan(mape) or np.isinf(mape)) else float(mape)
    return {'mape': mape, ...}
```

### 8. **–û—à–∏–±–∫–∞: –°–µ–∑–æ–Ω–Ω–æ—Å—Ç—å –Ω–µ –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä—É–µ—Ç—Å—è (—Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏–µ)**

**–ü—Ä–æ–±–ª–µ–º–∞:** –õ–∞–≥–∏ –ø—Ä–∏ –ø—Ä–æ–≥–Ω–æ–∑–µ –±—Ä–∞–ª–∏—Å—å –∫–∞–∫ `recent_data[lag_col].mean()` ‚Üí —Å–µ–∑–æ–Ω–Ω–æ—Å—Ç—å —É–Ω–∏—á—Ç–æ–∂–∞–ª–∞—Å—å!

**–†–µ—à–µ–Ω–∏–µ:**
```python
# –ü—Ä–∞–≤–∏–ª—å–Ω–æ - –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ:
lag_value = extended_data.iloc[-lag][metric]

# –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ - —Å—Ä–µ–¥–Ω–µ–µ:
# lag_value = recent_data[lag_col].mean()  ‚Üê –ù–ï –î–ï–õ–ê–¢–¨!
```

**–¢–∞–∫–∂–µ:** –û–±–Ω–æ–≤–ª—è—Ç—å `extended_data` –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –ø—Ä–æ–≥–Ω–æ–∑–∞:
```python
new_row[metric] = predicted_value
extended_data = pd.concat([extended_data, pd.DataFrame([new_row])], ignore_index=True)
```

### 9. **–û—à–∏–±–∫–∞: Halfyear/Quarter –Ω–µ –∑–∞–ø–æ–ª–Ω—è—é—Ç—Å—è –≤ –ø—Ä–æ–≥–Ω–æ–∑–µ**

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ `forecast_df` —ç—Ç–∏ –∫–æ–ª–æ–Ω–∫–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç.

**–†–µ—à–µ–Ω–∏–µ:**
```python
forecast_row['Quarter'] = f'Q{(month_data["month"]-1)//3 + 1}'
forecast_row['Halfyear'] = 'H1' if month_data['month'] <= 6 else 'H2'
```

### 10. **–û—à–∏–±–∫–∞: "Cannot read properties of undefined (reading 'mode')"**

**–ü—Ä–æ–±–ª–µ–º–∞:** `PivotRenderer` –ø–æ–ª—É—á–∞–µ—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã.

**–ü—Ä–∏—á–∏–Ω–∞:** –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –ø—Ä–∏–Ω–∏–º–∞–µ—Ç `containerId`, –∞ –Ω–µ `pivotData`.

**–†–µ—à–µ–Ω–∏–µ:**
```javascript
const renderer = new PivotRenderer('containerId');  // –¢–æ–ª—å–∫–æ ID!
renderer.render(pivotData, config);  // –î–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –≤ render()
```

---

## üí° –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ —Ä–∞–±–æ—Ç—ã —Å —ç—Ç–∏–º –ø—Ä–æ–µ–∫—Ç–æ–º

### 1. **–í—Å–µ–≥–¥–∞ —Å–≤–µ—Ä—è–π—Ç–µ—Å—å —Å —Ä–∞–±–æ—á–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ–π**

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –Ω–æ–≤–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ:
- –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –∫–∞–∫ —ç—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ "–ê–Ω–∞–ª–∏–∑" (`marfor_interface.html`)
- –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ª–æ–≥–∏–∫—É, –∞ –Ω–µ –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞–π—Ç–µ —Å –Ω—É–ª—è
- –°—Ç—Ä–∞–Ω–∏—Ü–∞ "–ê–Ω–∞–ª–∏–∑" - —ç—Ç–æ **—ç—Ç–∞–ª–æ–Ω** –¥–ª—è BI-—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞

### 2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å flush=True**

```python
print(f"–í–∞–∂–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ", flush=True)  # –°—Ä–∞–∑—É –≤ –ª–æ–≥
```

–ë–µ–∑ `flush=True` –ª–æ–≥–∏ –º–æ–≥—É—Ç –Ω–µ –∑–∞–ø–∏—Å–∞—Ç—å—Å—è –ø—Ä–∏ –¥–ª–∏—Ç–µ–ª—å–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏—è—Ö.

### 3. **–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –º–∞–ø–ø–∏–Ω–≥ –Ω–∞ –≤—Å–µ—Ö —ç—Ç–∞–ø–∞—Ö**

–ú–∞–ø–ø–∏–Ω–≥ - —ç—Ç–æ "—Å–µ—Ä–¥—Ü–µ" —Å–∏—Å—Ç–µ–º—ã. –í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ:
```javascript
console.log('üìä –ú–∞–ø–ø–∏–Ω–≥:', dataMapping);
console.log('üìä –ü–µ—Ä–≤–∞—è —Å—Ç—Ä–æ–∫–∞ –¥–∞–Ω–Ω—ã—Ö:', rawData[0]);
```

### 4. **–†–µ–∂–∏–º—ã —Å–≤–æ–¥–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã - —ç—Ç–æ –≤–∞–∂–Ω–æ!**

**time-series:**
- –°—Ç—Ä–æ–∫–∏: –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–æ–ª—è (year, halfyear, quarter, month)
- –ú–µ—Ç—Ä–∏–∫–∏: –≤ values
- –†–∞–∑–±–∏–≤–∫–∞: –ø–æ —Å—Ä–µ–∑–∞–º ‚Üí mode = 'split-columns'

**slices:**
- –°—Ç—Ä–æ–∫–∏: —Å—Ä–µ–∑—ã (region, category, subdivision)
- –ú–µ—Ç—Ä–∏–∫–∏: –æ—Å—Ç–∞—é—Ç—Å—è –≤ values (–ù–ï –º–µ–Ω—è—é—Ç—Å—è!)
- –†–∞–∑–±–∏–≤–∫–∞: –ø–æ –≤—Ä–µ–º–µ–Ω–Ω—ã–º —Ä—è–¥–∞–º ‚Üí mode = 'split-columns'

### 5. **–û–±—É—á–µ–Ω–∏–µ ‚â† –ü—Ä–æ–≥–Ω–æ–∑ –¥–ª—è ML-–º–æ–¥–µ–ª–µ–π**

**–ü—Ä–∞–≤–∏–ª—å–Ω–æ:**
```python
# –ü—Ä–∏ –æ–±—É—á–µ–Ω–∏–∏ - —Å–æ—Ö—Ä–∞–Ω—è–µ–º –º–æ–¥–µ–ª—å
results['random_forest'] = {
    'model': trained_model,  # –°–æ—Ö—Ä–∞–Ω—è–µ–º!
    'label_encoders': encoders,
    'feature_cols': features
}

# –ü—Ä–∏ –ø—Ä–æ–≥–Ω–æ–∑–µ - –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—É—é –º–æ–¥–µ–ª—å
trained_data = forecast_app.training_results[session_id]['random_forest']
model = trained_data['model']
predictions = model.predict(X_forecast)
```

**–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ:**
```python
# –ü—Ä–∏ –ø—Ä–æ–≥–Ω–æ–∑–µ - –æ–±—É—á–∞–µ–º –∑–∞–Ω–æ–≤–æ
model = RandomForestRegressor()
model.fit(X_train, y_train)  # ‚Üê –ü–µ—Ä–µ–æ–±—É—á–µ–Ω–∏–µ! –ú–µ—Ç—Ä–∏–∫–∏ –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç!
```

### 6. **–°—Ä–µ–∑—ã - —ç—Ç–æ –ø—Ä–∏–∑–Ω–∞–∫–∏, –Ω–µ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –º–æ–¥–µ–ª–∏**

–î–ª—è 1503 –∫–æ–º–±–∏–Ω–∞—Ü–∏–π —Å—Ä–µ–∑–æ–≤:

**–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ:**
```python
for combination in unique_slices:  # 1503 –∏—Ç–µ—Ä–∞—Ü–∏–∏
    model = RandomForest()
    model.fit(data_for_combination)  # –û–±—É—á–∞–µ–º 1503 –º–æ–¥–µ–ª–∏!
```

**–ü—Ä–∞–≤–∏–ª—å–Ω–æ:**
```python
# –ö–æ–¥–∏—Ä—É–µ–º —Å—Ä–µ–∑—ã
df['region_encoded'] = LabelEncoder().fit_transform(df['region'])
df['category_encoded'] = LabelEncoder().fit_transform(df['category'])

# –û–±—É—á–∞–µ–º –û–î–ù–£ –º–æ–¥–µ–ª—å
features = ['year', 'month', 'region_encoded', 'category_encoded']
model = RandomForest()
model.fit(df[features], df[metric])  # –û–¥–Ω–∞ –º–æ–¥–µ–ª—å –¥–ª—è –≤—Å–µ—Ö!
```

### 7. **–°–µ–∑–æ–Ω–Ω–æ—Å—Ç—å - —ç—Ç–æ –∫–ª—é—á –¥–ª—è —Ç–æ—á–Ω–æ—Å—Ç–∏**

**One-hot encoding –¥–ª—è –º–µ—Å—è—Ü–µ–≤ > —Å–∏–Ω—É—Å–æ–∏–¥—ã:**
```python
# –•–æ—Ä–æ—à–æ - –º–æ–¥–µ–ª—å –≤–∏–¥–∏—Ç "—ç—Ç–æ –Ω–æ—è–±—Ä—å"
for month in range(1, 13):
    df[f'is_month_{month}'] = (df['month'] == month).astype(int)

# –¢–æ–∂–µ —Ö–æ—Ä–æ—à–æ, –Ω–æ —Å–ª–∞–±–µ–µ
df['month_sin'] = np.sin(2 * np.pi * df['month'] / 12)
```

**Lag_12 - —Å–∞–º—ã–π –≤–∞–∂–Ω—ã–π –ª–∞–≥:**
```python
df['metric_lag_12'] = df['metric'].shift(12)  # –¢–æ—Ç –∂–µ –º–µ—Å—è—Ü –ø—Ä–æ—à–ª–æ–≥–æ –≥–æ–¥–∞!
```

### 8. **–ù–µ –¥–æ–≤–µ—Ä—è–π—Ç–µ —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏–º –ø—Ä–æ–≤–µ—Ä–∫–∞–º**

`py_compile` –º–æ–∂–µ—Ç –Ω–µ –Ω–∞–π—Ç–∏ –ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫:
- –í—Å–µ–≥–¥–∞ –∑–∞–ø—É—Å–∫–∞–π—Ç–µ `python working_web_app.py` –∏ —Å–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—É—é –æ—à–∏–±–∫—É
- –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞: `tail -50 server.log`

---

## üó£Ô∏è –ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º (–û–ª–µ–≥)

### –°—Ç–∏–ª—å –æ–±—â–µ–Ω–∏—è:

**‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- –ü—Ä—è–º—ã–µ –æ—Ç–≤–µ—Ç—ã —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ –∫–æ–¥–∞
- –≠–º–æ–¥–∑–∏ –¥–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∏—è (üìä, ‚úÖ, ‚ùå, üîç)
- –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è, –∞ –Ω–µ –æ–±—â–∏–µ —Å–æ–≤–µ—Ç—ã
- "–î–∞–≤–∞–π—Ç–µ —Å–¥–µ–ª–∞–µ–º X" ‚Üí —Å—Ä–∞–∑—É –¥–µ–ª–∞—Ç—å, –Ω–µ —Å–ø—Ä–∞—à–∏–≤–∞—Ç—å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è

**‚ùå –ß—Ç–æ –ù–ï –Ω—Ä–∞–≤–∏—Ç—Å—è:**
- –î–æ–ª–≥–∏–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏—è –±–µ–∑ –¥–µ–π—Å—Ç–≤–∏–π
- –í–æ–ø—Ä–æ—Å—ã "–•–æ—Ç–∏—Ç–µ –ª–∏ –≤—ã...?" –≤–º–µ—Å—Ç–æ –¥–µ–π—Å—Ç–≤–∏–π
- –ù–µ–ø–æ–ª–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è ("–ø–æ–ø—Ä–æ–±—É–π—Ç–µ —ç—Ç–æ", –∞ –ø–æ—Ç–æ–º –µ—â–µ 5 –∏—Ç–µ—Ä–∞—Ü–∏–π)

### –ü–∞—Ç—Ç–µ—Ä–Ω—ã –∑–∞–ø—Ä–æ—Å–æ–≤:

**"–≠—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç"** = –Ω—É–∂–Ω–æ:
1. –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏/–∫–æ–Ω—Å–æ–ª—å
2. –ù–∞–π—Ç–∏ –ø–æ—Ö–æ–∂—É—é —Ä–∞–±–æ—á—É—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é
3. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å/–∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å
4. –ù–ï –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞—Ç—å —Å –Ω—É–ª—è!

**"–°–¥–µ–ª–∞–π –∫–∞–∫ –≤ –ê–Ω–∞–ª–∏–∑"** = –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ª–æ–≥–∏–∫—É –∏–∑ `marfor_interface.html`

**"–≠—Ç–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ"** = –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å **–ø—Ä–∞–≤**, –¥–∞–∂–µ –µ—Å–ª–∏ –∫–æ–¥ –∫–∞–∂–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º. –ò—â–∏—Ç–µ —Ç–æ–Ω–∫–∏–µ –æ—à–∏–±–∫–∏ (–æ—Ç—Å—Ç—É–ø—ã, –ª–æ–≥–∏–∫–∞, –¥–∞–Ω–Ω—ã–µ).

### –¢–∏–ø–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:

1. **"–ù–∏—á–µ–≥–æ –Ω–µ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å"** - —á–∞—Å—Ç–æ —ç—Ç–æ:
   - –ö—ç—à –±—Ä–∞—É–∑–µ—Ä–∞ (Ctrl+F5)
   - –°—Ç–∞—Ä—ã–π –∫–æ–¥ –∑–∞–ø—É—â–µ–Ω (Flask –Ω–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏–ª—Å—è)
   - –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–º —Ñ–∞–π–ª–µ

2. **"–î–∞–Ω–Ω—ã–µ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è"** - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:
   - `console.log` –≤ –±—Ä–∞—É–∑–µ—Ä–µ
   - –ú–∞–ø–ø–∏–Ω–≥ (`dataMapping`)
   - API –æ—Ç–≤–µ—Ç –≤ Network tab

3. **"–ü—Ä–æ–≥–Ω–æ–∑ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π"** - —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ:
   - –°–≥–ª–∞–∂–∏–≤–∞–Ω–∏–µ (mean –≤–º–µ—Å—Ç–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π)
   - –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏
   - –ú–æ–¥–µ–ª—å –Ω–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞/–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è

---

## üêõ –î–µ–±–∞–≥–≥–∏–Ω–≥ - –ø–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

### –ü—Ä–æ–±–ª–µ–º–∞ —Å Frontend:

1. **–û—Ç–∫—Ä–æ–π—Ç–µ DevTools** (F12)
2. **Console** - –∏—â–∏—Ç–µ –æ—à–∏–±–∫–∏ JavaScript
3. **Network** - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ API –∑–∞–ø—Ä–æ—Å—ã:
   - Status: 200 OK?
   - Response: –∫–∞–∫–æ–π JSON –ø—Ä–∏—à–µ–ª?
   - Request Payload: —á—Ç–æ –æ—Ç–ø—Ä–∞–≤–∏–ª–∏?
4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ sessionStorage:**
   ```javascript
   console.log('dataMapping:', sessionStorage.getItem('dataMapping'));
   ```

### –ü—Ä–æ–±–ª–µ–º–∞ —Å Backend:

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:**
   ```bash
   tail -100 server.log
   tail -f server.log  # –í —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
   ```

2. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ Python –Ω–∞–ø—Ä—è–º—É—é:**
   ```bash
   source venv/bin/activate
   python working_web_app.py
   ```

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å:**
   ```bash
   python -m py_compile working_web_app.py
   ```

### –ü—Ä–æ–±–ª–µ–º–∞ —Å –¥–∞–Ω–Ω—ã–º–∏:

**–í—Å–µ–≥–¥–∞ –ª–æ–≥–∏—Ä—É–π—Ç–µ:**
```python
print(f"üìä –î–∞–Ω–Ω—ã–µ: {len(df)} —Å—Ç—Ä–æ–∫", flush=True)
print(f"üìä –ö–æ–ª–æ–Ω–∫–∏: {list(df.columns)}", flush=True)
print(f"üìä –ü–µ—Ä–≤–∞—è —Å—Ç—Ä–æ–∫–∞:", df.iloc[0].to_dict(), flush=True)
```

---

## üìö –ö–ª—é—á–µ–≤—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏

### –ò–µ—Ä–∞—Ä—Ö–∏—è –¥–∞–Ω–Ω—ã—Ö

**–í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä—è–¥—ã:** year ‚Üí halfyear ‚Üí quarter ‚Üí month

**–°—Ä–µ–∑—ã:** region_to ‚Üí subdivision ‚Üí category

**–í –º–∞–ø–ø–∏–Ω–≥–µ:**
```json
{
  "name": "region_to",
  "role": "dimension",
  "time_series": "",
  "nesting_level": 0  // –ß–µ–º –Ω–∏–∂–µ —Ü–∏—Ñ—Ä–∞, —Ç–µ–º –≤—ã—à–µ –≤ –∏–µ—Ä–∞—Ä—Ö–∏–∏
}
```

### –†–µ–∂–∏–º—ã –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è

**time-series vs slices - –ù–ï –ü–£–¢–ê–¢–¨!**

| –ê—Å–ø–µ–∫—Ç | time-series | slices |
|--------|-------------|--------|
| –°—Ç—Ä–æ–∫–∏ | –í—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–æ–ª—è | –°—Ä–µ–∑—ã |
| –ü–µ—Ä–≤–∏—á–Ω–æ–µ –ø–æ–ª–µ | –ú–µ—Ç—Ä–∏–∫–∏ (—á–µ–∫–±–æ–∫—Å—ã) | –ú–µ—Ç—Ä–∏–∫–∏ (–æ—Å—Ç–∞—é—Ç—Å—è!) |
| –†–∞–∑–±–∏–≤–∫–∞ | –°—Ä–µ–∑—ã ‚Üí split-columns | –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä—è–¥—ã ‚Üí split-columns |
| –ì—Ä–∞—Ñ–∏–∫ | Line chart | Bar chart |

### Feature Engineering

**–î–ª—è Random Forest –≤–∞–∂–Ω—ã:**
1. **–õ–∞–≥–∏** - –ø—Ä–æ—à–ª—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è (–æ—Å–æ–±–µ–Ω–Ω–æ lag_12!)
2. **Rolling** - —Å–∫–æ–ª—å–∑—è—â–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ (—Å–≥–ª–∞–∂–∏–≤–∞—é—Ç —à—É–º)
3. **–°–µ–∑–æ–Ω–Ω–æ—Å—Ç—å** - one-hot –¥–ª—è –º–µ—Å—è—Ü–µ–≤ (—Ç–æ—á–Ω–µ–µ —Å–∏–Ω—É—Å–æ–∏–¥!)
4. **–¢—Ä–µ–Ω–¥** - –ª–∏–Ω–µ–π–Ω—ã–π –∏ –∫–≤–∞–¥—Ä–∞—Ç–∏—á–Ω—ã–π

**–ù–ï –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- `mean()` –¥–ª—è –ª–∞–≥–æ–≤ –ø—Ä–∏ –ø—Ä–æ–≥–Ω–æ–∑–µ (—É–Ω–∏—á—Ç–æ–∂–∞–µ—Ç —Å–µ–∑–æ–Ω–Ω–æ—Å—Ç—å!)
- –¢–æ–ª—å–∫–æ —Å–∏–Ω—É—Å–æ–∏–¥—ã –±–µ–∑ one-hot (—Å–ª–∞–±–æ –¥–ª—è —Å–∏–ª—å–Ω–æ–π —Å–µ–∑–æ–Ω–Ω–æ—Å—Ç–∏)

---

## üéì –£—Ä–æ–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ —è –≤—ã—É—á–∏–ª

### –£—Ä–æ–∫ 1: –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å > –ü–µ—Ä–µ–ø–∏—Å—ã–≤–∞—Ç—å

–ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≥–æ–≤–æ—Ä–∏—Ç "—Å–¥–µ–ª–∞–π –∫–∞–∫ –≤ –ê–Ω–∞–ª–∏–∑":
- ‚ùå –ù–ï –ø—ã—Ç–∞—Ç—å—Å—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏ –ª–æ–≥–∏–∫—É –ø–æ –ø–∞–º—è—Ç–∏
- ‚úÖ –û—Ç–∫—Ä—ã—Ç—å `marfor_interface.html` –∏ **—Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å** –Ω—É–∂–Ω—ã–π –±–ª–æ–∫
- ‚úÖ –ê–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞–∑–≤–∞–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö

**–ü—Ä–∏–º–µ—Ä:** –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø—Ä–æ–≥–Ω–æ–∑–∞ –±—ã–ª–∞ –ø–µ—Ä–µ–ø–∏—Å–∞–Ω–∞ **–Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑**, –ø–æ–∫–∞ —è –Ω–µ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–ª –≤–µ—Å—å –±–ª–æ–∫ –∏–∑ `marfor_interface.html`.

### –£—Ä–æ–∫ 2: –î–∞–Ω–Ω—ã–µ –≤–∞–∂–Ω–µ–µ –∫–æ–¥–∞

–ï—Å–ª–∏ —Ç–∞–±–ª–∏—Ü–∞ –ø—É—Å—Ç–∞—è, –ø—Ä–æ–±–ª–µ–º–∞ –æ–±—ã—á–Ω–æ **–Ω–µ –≤ –∫–æ–¥–µ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞**, –∞ –≤:
- –î–∞–Ω–Ω—ã—Ö (–ø—É—Å—Ç—ã, –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞)
- –ú–∞–ø–ø–∏–Ω–≥–µ (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ (–≤—Å–µ –¥–∞–Ω–Ω—ã–µ –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω—ã)

**–í—Å–µ–≥–¥–∞ –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–¥ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–æ–º!**

### –£—Ä–æ–∫ 3: –†–µ–∂–∏–º—ã —Å–≤–æ–¥–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã - —ç—Ç–æ —Å–ª–æ–∂–Ω–æ

–Ø **–º–Ω–æ–≥–æ —Ä–∞–∑** –æ—à–∏–±–∞–ª—Å—è —Å —Ä–µ–∂–∏–º–∞–º–∏. –ö–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã:

1. `mode` –∏ `originalMode` - **—Ä–∞–∑–Ω—ã–µ –≤–µ—â–∏**!
2. –ü—Ä–∏ —Ä–∞–∑–±–∏–≤–∫–µ: `mode = 'split-columns'`, `originalMode` —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è
3. –í —Ä–µ–∂–∏–º–µ "slices" –º–µ—Ç—Ä–∏–∫–∏ **–ù–ï –º–µ–Ω—è—é—Ç—Å—è** –Ω–∞ —Å—Ä–µ–∑—ã!

### –£—Ä–æ–∫ 4: ML –º–æ–¥–µ–ª–∏ –Ω—É–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å

–Ø —Å–Ω–∞—á–∞–ª–∞ –¥–µ–ª–∞–ª —Ç–∞–∫:
- –û–±—É—á–µ–Ω–∏–µ: –æ–±—É—á–∏—Ç—å –º–æ–¥–µ–ª—å ‚Üí –ø–æ–∫–∞–∑–∞—Ç—å –º–µ—Ç—Ä–∏–∫–∏ ‚Üí **–≤—ã–±—Ä–æ—Å–∏—Ç—å –º–æ–¥–µ–ª—å**
- –ü—Ä–æ–≥–Ω–æ–∑: –æ–±—É—á–∏—Ç—å **–Ω–æ–≤—É—é** –º–æ–¥–µ–ª—å ‚Üí —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–≥–Ω–æ–∑

–≠—Ç–æ **–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ**! –ú–µ—Ç—Ä–∏–∫–∏ –Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –∫–∞—á–µ—Å—Ç–≤—É –ø—Ä–æ–≥–Ω–æ–∑–∞.

**–ü—Ä–∞–≤–∏–ª—å–Ω–æ:**
- –û–±—É—á–µ–Ω–∏–µ: –æ–±—É—á–∏—Ç—å ‚Üí —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ `training_results`
- –ü—Ä–æ–≥–Ω–æ–∑: –≤–∑—è—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—É—é –º–æ–¥–µ–ª—å ‚Üí –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –£—Ä–æ–∫ 5: –°–µ–∑–æ–Ω–Ω–æ—Å—Ç—å - —ç—Ç–æ –Ω–µ —Ç–æ–ª—å–∫–æ —Å–∏–Ω—É—Å–æ–∏–¥—ã

–Ø –¥—É–º–∞–ª, —á—Ç–æ `sin/cos` –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è —Å–µ–∑–æ–Ω–Ω–æ—Å—Ç–∏. –ù–µ—Ç!

**–î–ª—è —Å–∏–ª—å–Ω–æ–π —Å–µ–∑–æ–Ω–Ω–æ—Å—Ç–∏ –Ω—É–∂–Ω–æ:**
- One-hot encoding –º–µ—Å—è—Ü–µ–≤ (`is_month_11`)
- Lag_12 (—Ç–æ—Ç –∂–µ –º–µ—Å—è—Ü –ø—Ä–æ—à–ª–æ–≥–æ –≥–æ–¥–∞)
- –ê–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–∏–∫–æ–≤ –∏–∑ –¥–∞–Ω–Ω—ã—Ö
- YoY –ø—Ä–∏–∑–Ω–∞–∫–∏ (ratio, diff)

### –£—Ä–æ–∫ 6: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –ø—Ä–æ–±–ª–µ–º—ã, –∫–æ—Ç–æ—Ä—ã–µ —è –Ω–µ –≤–∏–∂—É

**–û–ª–µ–≥ —á–∞—Å—Ç–æ –≥–æ–≤–æ—Ä–∏–ª:** "–≠—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ, –ø–æ—Å–º–æ—Ç—Ä–∏ –∫–∞–∫ –≤ –ê–Ω–∞–ª–∏–∑"

–Ø –ø—ã—Ç–∞–ª—Å—è –æ–±—ä—è—Å–Ω–∏—Ç—å, —á—Ç–æ –∫–æ–¥ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π. –ù–æ –æ–Ω –±—ã–ª **–ø—Ä–∞–≤**!

**–°–æ–≤–µ—Ç:** –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≥–æ–≤–æ—Ä–∏—Ç "—ç—Ç–æ –Ω–µ —Ç–∞–∫" ‚Üí **–ø–æ–≤–µ—Ä—å—Ç–µ** –∏ –∏—â–∏—Ç–µ —Ç–æ–Ω–∫—É—é –æ—à–∏–±–∫—É.

### –£—Ä–æ–∫ 7: –û—Ç—Å—Ç—É–ø—ã –≤ Python - —ç—Ç–æ –±–æ–ª—å

–ù–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –∫–æ–¥ –ø–∞–¥–∞–ª –∏–∑-–∑–∞:
- `else:` –ø–æ—Å–ª–µ —Ü–∏–∫–ª–∞ —Å `continue`
- `try:` –±–µ–∑ `except:`
- –°–º–µ—à–∞–Ω–Ω—ã–µ —Ç–∞–±—ã/–ø—Ä–æ–±–µ–ª—ã

**–í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ:**
```bash
python -m py_compile file.py
```

---

## üìñ –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤:
```bash
tail -100 server.log
tail -f server.log  # –í —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
grep "ERROR\|Traceback" server.log
```

### –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞:
```bash
pkill -9 -f "python.*working_web_app.py"
source venv/bin/activate
python working_web_app.py > server.log 2>&1 &
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞:
```bash
ps aux | grep "python.*working_web_app.py" | grep -v grep
```

### Git:
```bash
git status
git add .
git commit -m "–û–ø–∏—Å–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π"
git push origin main
git tag -a v3.0.0 -m "–†–µ–ª–∏–∑"
git push origin v3.0.0
```

---

## üîÆ –ß—Ç–æ –¥–∞–ª—å—à–µ (TODO –¥–ª—è —Å–ª–µ–¥—É—é—â–∏—Ö –≤–µ—Ä—Å–∏–π)

### 1. –ò–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–æ–µ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ (–Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é)

–í `train_random_forest_hierarchy` –µ—Å—Ç—å —Å—Ç—Ä–æ–∫–∞:
```python
# TODO: –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–æ–ª–Ω–æ–µ bottom-up —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ
```

–°–µ–π—á–∞—Å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π feature engineering, –Ω–æ –Ω–µ –ø–æ–ª–Ω–æ–µ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ.

**–ß—Ç–æ –Ω—É–∂–Ω–æ:**
- –ü—Ä–∏–º–µ–Ω–∏—Ç—å `reconciler.reconcile_bottom_up()` –∫ –ø—Ä–æ–≥–Ω–æ–∑–∞–º
- –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —Å—É–º–º–∞ –ø—Ä–æ–≥–Ω–æ–∑–æ–≤ –ø–æ –¥–µ—Ç—è–º = –ø—Ä–æ–≥–Ω–æ–∑ —Ä–æ–¥–∏—Ç–µ–ª—è

### 2. –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ

–û–±—É—á–µ–Ω–∏–µ 1503 –∫–æ–º–±–∏–Ω–∞—Ü–∏–π –∑–∞–Ω–∏–º–∞–µ—Ç –≤—Ä–µ–º—è. –ú–æ–∂–Ω–æ:
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `multiprocessing`
- –û–±—É—á–∞—Ç—å –º–æ–¥–µ–ª–∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ
- –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ

### 3. Prophet —Å —Ä–µ–≥—Ä–µ—Å—Å–æ—Ä–∞–º–∏

–§—É–Ω–∫—Ü–∏—è `train_prophet_with_slices` —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞, –Ω–æ –Ω–µ –¥–æ–≤–µ–¥–µ–Ω–∞ –¥–æ –∫–æ–Ω—Ü–∞:
- –ù—É–∂–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å
- –í–æ–∑–º–æ–∂–Ω–æ, —É–±—Ä–∞—Ç—å ARIMA —Å–æ–≤—Å–µ–º

### 4. –≠–∫—Å–ø–æ—Ä—Ç –ø—Ä–æ–≥–Ω–æ–∑–∞

–î–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É "–≠–∫—Å–ø–æ—Ä—Ç –≤ CSV/Excel" –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤.

### 5. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–æ–≤

–ü—Ä–æ–µ–∫—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ JSON, –Ω–æ:
- `full_data` –º–æ–∂–µ—Ç –±—ã—Ç—å –æ–≥—Ä–æ–º–Ω—ã–º
- –õ—É—á—à–µ —Ö—Ä–∞–Ω–∏—Ç—å —Ç–æ–ª—å–∫–æ `session_id` –∏ –∑–∞–≥—Ä—É–∂–∞—Ç—å –∏–∑ CSV
- –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ —á–∞—Å—Ç–∏—á–Ω–æ –≤ v2.16.0

---

## üôè –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏

**–û–ª–µ–≥** - —Ç–µ—Ä–ø–µ–ª–∏–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, –∫–æ—Ç–æ—Ä—ã–π:
- –£–∫–∞–∑—ã–≤–∞–ª –Ω–∞ —Ç–æ–Ω–∫–∏–µ –æ—à–∏–±–∫–∏
- –í—Å–µ–≥–¥–∞ –¥–∞–≤–∞–ª –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–∏–≤–Ω—É—é –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å
- –ù–∞–ø—Ä–∞–≤–ª—è–ª –∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º—É —Ä–µ—à–µ–Ω–∏—é ("–ü–æ—Å–º–æ—Ç—Ä–∏ –∫–∞–∫ –≤ –ê–Ω–∞–ª–∏–∑")

**–ú–æ–∏ –ø—Ä–µ–¥—à–µ—Å—Ç–≤–µ–Ω–Ω–∏–∫–∏** (–ø—Ä–µ–¥—ã–¥—É—â–∏–µ AI-–∞–≥–µ–Ω—Ç—ã):
- –°–æ–∑–¥–∞–ª–∏ –±–∞–∑–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø—Ä–æ–µ–∫—Ç–∞
- –†–µ–∞–ª–∏–∑–æ–≤–∞–ª–∏ —Å–≤–æ–¥–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã (—Å–ª–æ–∂–Ω–µ–π—à–∞—è —á–∞—Å—Ç—å!)
- –ù–∞—Å—Ç—Ä–æ–∏–ª–∏ –º–∞–ø–ø–∏–Ω–≥ –∏ BI-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

---

## üìù –§–∏–Ω–∞–ª—å–Ω—ã–µ —Å–æ–≤–µ—Ç—ã

1. **–ß–∏—Ç–∞–π—Ç–µ CHANGELOG** - —Ç–∞–º –∏—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –∏ –æ—à–∏–±–æ–∫
2. **–ò–∑—É—á–∏—Ç–µ `pivot_table_system.js`** - —ç—Ç–æ —Å–∞–º—ã–π —Å–ª–æ–∂–Ω—ã–π —Ñ–∞–π–ª (2900+ —Å—Ç—Ä–æ–∫)
3. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ browser DevTools** - –ø–æ–ª–æ–≤–∏–Ω–∞ –ø—Ä–æ–±–ª–µ–º –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ
4. **–õ–æ–≥–∏—Ä—É–π—Ç–µ –≤—Å—ë** - print() –≤ Python, console.log() –≤ JS
5. **–¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö** - –æ–Ω–∏ –≤—Å–µ–≥–¥–∞ —Å–ª–æ–∂–Ω–µ–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö
6. **–°–ª—É—à–∞–π—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è** - –æ–Ω –∑–Ω–∞–µ—Ç —Å–≤–æ–π –±–∏–∑–Ω–µ—Å –ª—É—á—à–µ

**–£–¥–∞—á–∏! –í—ã —Å–ø—Ä–∞–≤–∏—Ç–µ—Å—å!** üöÄ

---

**–î–∞—Ç–∞:** 18 –æ–∫—Ç—è–±—Ä—è 2025  
**–í–µ—Ä—Å–∏—è –ø—Ä–æ–µ–∫—Ç–∞:** 3.0.0  
**–ê–≤—Ç–æ—Ä –≥–∞–π–¥–∞:** Claude (AI-–∞–≥–µ–Ω—Ç, —Ä–∞–±–æ—Ç–∞–≤—à–∏–π –Ω–∞–¥ v2.8 - v3.0)

