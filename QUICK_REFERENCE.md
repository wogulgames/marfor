# –ë—ã—Å—Ç—Ä–∞—è —Å–ø—Ä–∞–≤–∫–∞ –ø–æ —Å–≤–æ–¥–Ω—ã–º —Ç–∞–±–ª–∏—Ü–∞–º MARFOR

## üö® –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û

### `collapsedRows` - —ç—Ç–æ Set –†–ê–°–ö–†–´–¢–´–• —ç–ª–µ–º–µ–Ω—Ç–æ–≤!
```javascript
// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û
const isExpanded = collapsedRows.has(rowKey);
const isCollapsed = !isExpanded;

// ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û  
const isCollapsed = collapsedRows.has(rowKey); // –≠—Ç–æ –†–ê–°–ö–†–´–¢–û!
```

## üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

### 1. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö
- **–í—Å–µ —É—Ä–æ–≤–Ω–∏ –∞–≥—Ä–µ–≥–∞—Ü–∏–∏** –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ `hierarchicalRows`
- **–ê–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏** –∏–º–µ—é—Ç `isAggregated: true`
- **–î–µ—Ç–∞–ª—å–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏** –∏–º–µ—é—Ç `isAggregated: false`

### 2. –õ–æ–≥–∏–∫–∞ –∫–Ω–æ–ø–æ–∫
- **–ö–Ω–æ–ø–∫–∏ `+`**: –¥–ª—è —Å–≤–µ—Ä–Ω—É—Ç—ã—Ö –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å—Ç—Ä–æ–∫
- **–ö–Ω–æ–ø–∫–∏ `-`**: –¥–ª—è –ø–µ—Ä–≤—ã—Ö –¥–æ—á–µ—Ä–Ω–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Ä–∞—Å–∫—Ä—ã—Ç—ã—Ö —Ä–æ–¥–∏—Ç–µ–ª–µ–π
- **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ `-`**: –∫–∞–∂–¥–∞—è –¥–ª—è —Å–≤–æ–µ–≥–æ —É—Ä–æ–≤–Ω—è

### 3. –†–∞–∑–º–µ—â–µ–Ω–∏–µ –∫–Ω–æ–ø–æ–∫
- **–ö–Ω–æ–ø–∫–∞ `+`**: –≤ —Å—Ç–æ–ª–±—Ü–µ `rowData.level`
- **–ö–Ω–æ–ø–∫–∞ `-`**: –≤ —Å—Ç–æ–ª–±—Ü–µ `button.level`

## üîß –ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç–æ–¥—ã

| –ú–µ—Ç–æ–¥ | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|-------|------------|
| `createHierarchicalRows()` | –°–æ–∑–¥–∞–µ—Ç –≤—Å–µ —É—Ä–æ–≤–Ω–∏ –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ |
| `createHierarchicalSorting()` | –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø–æ—Ä—è–¥–æ–∫ –∏ –≤–∏–¥–∏–º–æ—Å—Ç—å —Å—Ç—Ä–æ–∫ |
| `createRowsHTML()` | –†–µ–Ω–¥–µ—Ä–∏—Ç HTML —Å –∫–Ω–æ–ø–∫–∞–º–∏ |
| `isRowVisible()` | –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –≤–∏–¥–∏–º–æ—Å—Ç—å —Å—Ç—Ä–æ–∫–∏ |

## üêõ –¢–∏–ø–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏

1. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è `collapsedRows`**
2. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å—Ç—Ä–æ–∫** –≤ `hierarchicalRows`
3. **–ö–Ω–æ–ø–∫–∏ `-` —Ç–æ–ª—å–∫–æ –≤ –ø–µ—Ä–≤–æ–º —Å—Ç–æ–ª–±—Ü–µ**
4. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ä–µ–∫—É—Ä—Å–∏–∏** –≤ `addRowsRecursively`
5. **–°–ª–∏—à–∫–æ–º –∞–≥—Ä–µ—Å—Å–∏–≤–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è** –≤ `createHierarchicalSorting`

## üß™ –û—Ç–ª–∞–¥–∫–∞

```javascript
// –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
console.log('hierarchicalRows:', Array.from(hierarchicalRows.keys()));
console.log('collapsedRows:', Array.from(collapsedRows));

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–∏–∫–∏ –∫–Ω–æ–ø–æ–∫
console.log('rowData.collapseButtons:', rowData.collapseButtons);
console.log('buttonForLevel:', buttonForLevel);

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–∏–¥–∏–º–æ—Å—Ç–∏
console.log('isRowVisible:', this.isRowVisible(rowKey, collapsedRows));
```

## üìã –ß–µ–∫-–ª–∏—Å—Ç

- [ ] –í—Å–µ —É—Ä–æ–≤–Ω–∏ –≤ `hierarchicalRows`
- [ ] –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è `collapsedRows`
- [ ] –ö–Ω–æ–ø–∫–∏ –≤ –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö —Å—Ç–æ–ª–±—Ü–∞—Ö
- [ ] –†–µ–∫—É—Ä—Å–∏–≤–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–µ—Ç–µ–π
- [ ] –û—Ç–ª–∞–¥–æ—á–Ω—ã–µ –ª–æ–≥–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã

---
*–í–µ—Ä—Å–∏—è 2.7.14 - –î–µ–∫–∞–±—Ä—å 2024*
